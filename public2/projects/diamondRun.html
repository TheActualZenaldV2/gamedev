<!DOCTYPE html>


<html>
<head>
	<title>Maze Game</title>
	<style>
		canvas {
			border: 1px solid black;
		}
	</style>
</head>
<body>
    <button onclick="level2()"> Level 2</button>
    <button onclick="level3()"> Level 3</button>
    <div id="cont">
        <p id="score">Score:  <span id="scoreHolder">0 </span></p>
	<canvas id="canvas"></canvas>
	</div>

    <style>
        #cont {
            height: 200px;
            width: 1000px;
        }
       canvas {
        border: 15px solid white;
      
  display: block;
  margin: 0 auto;
  position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:auto;
    background: linear-gradient(180deg, #30cfd0 0%, #330867 100%);
}


/* import poppins theme */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
/* import font awesome */
body {
    font-family: 'Poppins', sans-serif;
    background-color: black;
            margin: 0;
    padding: 0;
    box-sizing: border-box;
    color: white
}


    </style>


<script> 
var score = 0;
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
level = 1;
gameWon = false;
canvas.height = 500;
canvas.width = 500;
// Define the size of each cell
cellSize = 40;
// Define the camera
const camera = {
  x: 0,
  y: 0,
};


// Define the maze
maze = [
    //0 = empty space
    //1 = wall
    //2 = finish
    //3 = diamond
    //4 = fakeWall
    //5 = invisibleWall
    //6 = zoomOutBlock
    //7 = zoomInBlock
    //8 = jumpScare
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
  [1, 7, 1, 0, 0, 0, 0, 1, 3, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 3, 1],
  [1, 8, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1],
  [1, 4, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
  [1, 4, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1],
  [1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
  [1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1],
  [1, 0, 0, 0, 1, 0, 1, 0, 1, 5, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1],
  [1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1],
  [1, 0, 1, 3, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1],
  [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1],
  [1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1],
  [1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1],
  [1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1],
  [1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1],
  [1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1],
  [1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1],
  [1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1],
  [1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1],
  [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1],
  [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 3, 1, 1, 1],
  [1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1],
  [1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1],
  [1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1],
  [1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 2, 1, 1, 1],





  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
]

// Draw the maze and player on the canvas
function draw() {
        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
    requestAnimationFrame(draw);
    // Move the camera to keep the player centered
    camera.x = playerPosition.x * cellSize - canvas.width / 2 + cellSize / 2;
    camera.y = playerPosition.y * cellSize - canvas.height / 2 + cellSize / 2;

    // Clamp the camera position to keep it within the maze bounds
    camera.x = Math.max(0, Math.min(camera.x, maze[0].length * cellSize - canvas.width));
    camera.y = Math.max(0, Math.min(camera.y, maze.length * cellSize - canvas.height));



    // Draw the maze
    for (let i = 0; i < maze.length; i++) {
        for (let j = 0; j < maze[i].length; j++) {
            if (maze[i][j] === 1) {
                ctx.fillStyle = 'lime';
                ctx.fillRect(j * cellSize - camera.x, i * cellSize - camera.y, cellSize, cellSize);
            } else if (maze[i][j] === 2) {
                ctx.fillStyle = 'green';
                ctx.fillRect(j * cellSize - camera.x, i * cellSize - camera.y, cellSize, cellSize);
            }
            //handle diamonds
            else if (maze[i][j] === 3) {
                ctx.fillStyle = 'aqua';
                ctx.fillRect(j * cellSize - camera.x, i * cellSize - camera.y, cellSize, cellSize);
            }
            //draw fake walls slightly ligher color
            else if (maze[i][j] === 4) {
                ctx.fillStyle = '#05f561';
                ctx.fillRect(j * cellSize - camera.x, i * cellSize - camera.y, cellSize, cellSize);
            }
            //draw invisible walls invisible, but stop collision
            else if (maze[i][j] === 5) {
                ctx.fillStyle = 'black';
                ctx.fillRect(j * cellSize - camera.x, i * cellSize - camera.y, cellSize, cellSize);
            }
        }
    }

    // Draw the player as a red circle
ctx.fillStyle = 'red';
//draw as a circle
ctx.beginPath();
ctx.arc(playerPosition.x * cellSize - camera.x + cellSize / 2, playerPosition.y * cellSize - camera.y + cellSize / 2, cellSize / 3, 0, Math.PI * 2);
ctx.fill();

//if collision with diamond, remove it and replace with 0
    if (maze[playerPosition.y][playerPosition.x] === 3) {
        maze[playerPosition.y][playerPosition.x] = 0;
        score++;
        document.getElementById('scoreHolder').innerHTML = score;
    
    }



    //draw score on canvas
    ctx.fillStyle = 'black';
    ctx.font = '20px sans-serif';
    ctx.fillText("Score:" + score, 10, 50);



    //if collision with zoom out block, make the camera zoom out
    if (maze[playerPosition.y][playerPosition.x] === 6) {
//slowly animate zoom out
        if (cellSize !== 40 && cellSize > 40) {
            cellSize -= 1.55
        }
    }

     //if collision with zoom out block, make the camera zoom in
     if (maze[playerPosition.y][playerPosition.x] === 7) {
//slowly animate zoom in
        if (cellSize < 60) {
            cellSize += 1.55
        }
    }
   if(maze[playerPosition.y][playerPosition.x] === 8){
       //play a sound url
       var sound = new Audio('https://theactualzenaldv2.github.io/gamedev/public2/lg_washer.mp3');
            sound.play();
   }
// Set up the hint button on the canvas
ctx.fillStyle = 'black';
ctx.font = '20px sans-serif';
ctx.fillText("Hint", 10, 100);

function animateHint(){
    if (cellSize !== 40 && cellSize > 40) {
            cellSize -= 1.55;
            requestAnimationFrame(animateHint);
        }   

}
// Add a click event listener to the canvas
canvas.addEventListener('click', function(event) {
    // Check if the click was within the bounds of the hint button
    if (event.offsetX > 10 && event.offsetX < 50 && event.offsetY > 70 && event.offsetY < 100) {
        animateHint()
    }


});



   
    
 checkWin(); 
}


// Set the starting position of the player
let playerPosition = { x: 1, y: 1 };


function canMoveToCell(x, y) {
    // Check if the cell is within the bounds of the maze
    if (x < 0 || x >= maze[0].length || y < 0 || y >= maze.length) {
        return false;
    }

    // Check if the cell is blocked by an obstacle
    if (maze[y][x] === 1 || maze[y][x] === 5) {
        return false;
    }

    // If the cell is not blocked, the player can move to it
    return true;
}
// Define the speed of movement
var speed = 5;
document.addEventListener('keydown', function(event) {
    var targetX = playerPosition.x;
    var targetY = playerPosition.y;

    switch (event.code) {
        case 'KeyA': // A key
            targetX--;
            break;
        case 'KeyW': // W key
            targetY--;
            break;
        case 'KeyD': // D key
            targetX++;
            break;
        case 'KeyS': // S key
            targetY++;
            break;
    }

    if (canMoveToCell(targetX, targetY)) {
        var step = 1;
        var intervalTime = 10;

        var deltaX = targetX - playerPosition.x;
        var deltaY = targetY - playerPosition.y;
        var distance = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));

        var moveInterval = setInterval(function() {
            if (distance > 0) {
                var moveDistance = Math.min(step, distance);
                var moveX = (moveDistance / distance) * deltaX;
                var moveY = (moveDistance / distance) * deltaY;

                playerPosition.x += moveX;
                playerPosition.y += moveY;
                distance -= moveDistance;


            } else {
                clearInterval(moveInterval);
            }
        }, intervalTime);
    }
});


function level2(){
    //shortcut to lvl 2
    level = 2;
    //reset player position
    playerPosition.x = 1;
    playerPosition.y = 1;

    maze = [
     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1],
  [1,0,1,0,1,0,1,1,1,1,1,1,0,1,0,1,1,1,0,1],
  [1,0,1,0,1,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1],
  [1,0,1,0,0,0,1,1,1,1,0,1,0,1,0,1,1,1,0,1],
  [1,0,1,1,1,1,1,0,0,1,0,1,0,1,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,1,1,1,1],
  [1,1,1,0,1,1,1,0,1,0,0,1,0,1,0,0,0,0,0,1],
  [1,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,1,1,0,1],
  [1,0,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0,1],
  [1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,1,1,0,1],
  [1,1,1,0,1,0,1,0,1,1,1,1,1,1,0,0,0,0,0,1],
  [1,3,0,0,0,0,1,0,1,0,0,0,3,1,0,1,1,1,0,1],
  [1,1,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,0,0,1],
  [1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,1,1,1,1],
  [1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,0,0,0,1],
  [1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,2,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];

}

function level3(){
    level = 3;
    //reset player position
    playerPosition.x = 1;
    playerPosition.y = 1;
    maze = [[1,1,1,1,1,1,1,1,1,1],
[1,7,1,0,0,0,1,3,1,1],
[1,0,0,0,1,0,1,4,1,1],
[1,0,1,0,1,0,1,0,1,1],
[1,1,1,0,1,0,1,0,1,1],
[1,0,0,0,1,0,0,0,0,1],
[1,1,1,1,1,1,1,1,0,1],
[1,2,1,0,1,1,1,0,0,1],
[1,0,0,0,3,4,4,0,1,1],
[1,1,1,1,1,1,1,1,1,1]]
}


function checkWin(){

// Detect when the player reaches the end of the maze
if (maze[playerPosition.y][playerPosition.x] === 2) {
    if(level == 1){
        level = 2;
    alert('Level 2');
    //reset player position
    playerPosition.x = 1;
    playerPosition.y = 1;
    //reset maze
     maze = [
     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1],
  [1,0,1,0,1,0,1,1,1,1,1,1,0,1,0,1,1,1,0,1],
  [1,0,1,0,1,0,0,0,0,0,0,1,0,1,0,1,0,0,0,1],
  [1,0,1,0,0,0,1,1,1,1,0,1,0,1,0,1,1,1,0,1],
  [1,0,1,1,1,1,1,0,0,1,0,1,0,1,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,1,1,1,1],
  [1,1,1,0,1,1,1,0,1,0,0,1,0,1,0,0,0,0,0,1],
  [1,0,0,0,0,0,1,0,0,0,1,0,0,1,0,1,1,1,0,1],
  [1,0,1,1,1,0,1,1,1,1,1,0,1,1,0,1,0,0,0,1],
  [1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,1,1,0,1],
  [1,1,1,0,1,0,1,0,1,1,1,1,1,1,0,0,0,0,0,1],
  [1,3,0,0,0,0,1,0,1,0,0,0,3,1,0,1,1,1,0,1],
  [1,1,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,0,0,1],
  [1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,1,1,1,1],
  [1,0,1,1,1,0,1,1,1,0,1,1,1,1,1,1,0,0,0,1],
  [1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,2,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];
    


}
if(level == 2){
    alert("Level 3");
    level = 3;
    //reset player position
    playerPosition.x = 1;
    playerPosition.y = 1;
    maze =[[1,1,1,1,1,1,1,1,1,1],
[1,7,1,0,0,0,1,3,1,1],
[1,0,0,0,1,0,1,4,1,1],
[1,0,1,0,1,0,1,0,1,1],
[1,1,1,0,1,0,1,0,1,1],
[1,0,0,0,1,0,0,0,0,1],
[1,1,1,1,1,1,1,1,0,1],
[1,2,1,0,1,1,1,0,0,1],
[1,0,0,0,3,4,4,0,1,1],
[1,1,1,1,1,1,1,1,1,1]]
}
}

if(level == 2){
    if (maze[playerPosition.y][playerPosition.x] === 2 && gameWon == false) {
        gameWon = true;
    alert('You Win!');
    }
}
}






// Start the game
draw();


</script> 

</body>
</html>
