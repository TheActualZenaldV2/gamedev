<!DOCTYPE html>
<html>
<head>
	<title>Create Your Own Maze</title>
</head>
<body>
	<div id="map"></div>
	<div id="buttons">
        <button id="generate-map">Generate Map</button>
        <input id="size" type="text" placeholder="Size (e.g. 10x10)">
		<button id="empty">Empty Space</button>
		<button id="wall">Wall</button>
		<button id="finish">Finish</button>
		<button id="diamond">Diamond</button>
		<button id="fakeWall">Fake Wall</button>
		<button id="invisibleWall">Invisible Wall</button>
		<button id="zoomOutBlock">Zoom Out Block</button>
		<button id="zoomInBlock">Zoom In Block</button>
		<button id="jumpScare">Jump Scare</button>
		<input type="button" value="Export Map" onclick="exportMap()">
	</div>
</body>

<style>
#map {
  display: flex;
  flex-wrap: wrap;
}

#map > div {
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  border: 1px solid black;
}





#buttons {
	margin-top: 20px;
}

#buttons button {
	margin-right: 10px;
}
</style> 

<script>
var width;
var height;
var map = [];
var previusButton;



    document.getElementById("generate-map").addEventListener("click", function() {
        document.getElementById("generate-map").style.display = "none";
        document.getElementById("size").style.display = "none";
        map = []; // Reset the map array to an empty array
    var size = document.getElementById("size").value;
         width = parseInt(size.split("x")[0]);
        height = parseInt(size.split("x")[1]);
        var mapDiv = document.getElementById("map");
       

        mapDiv.style.width = width * 30 + "px";
        mapDiv.style.height = height * 30 + "px";
        mapDiv.innerHTML = "";
        for (var i = 0; i < height; i++) {
            map.push([]);
            for (var j = 0; j < width; j++) {
                var cell = document.createElement("div");
                cell.className = "cell";
                cell.style.width = 100 / width + "%";
                cell.style.height = 100 / height + "%";
                cell.addEventListener("click", changeCell);
                mapDiv.appendChild(cell);
                map[i].push(0);
            }
        }
    });

// Get the map div
var mapDiv = document.getElementById("map");

// Add cells to the map
for (var i = 0; i < height; i++) {
	for (var j = 0; j < width; j++) {
		var cell = document.createElement("div");
		cell.addEventListener("click", changeCell);
		mapDiv.appendChild(cell);
	}
}
// Change the cell's value when clicked
function changeCell() {
    
    var x = Array.prototype.indexOf.call(mapDiv.children, this) % width;
    var y = Math.floor(Array.prototype.indexOf.call(mapDiv.children, this) / width);
	var value;
	switch (selectedButton) {
		case "empty":
			value = 0;
            previusButton = selectedButton;
			break;
		case "wall":
			value = 1;
            previusButton = selectedButton;
			break;
		case "finish":
			value = 2;
            previusButton = selectedButton;
			break;
		case "diamond":
			value = 3;
            previusButton = selectedButton;
			break;
		case "fakeWall":
			value = 4;
            previusButton = selectedButton;
			break;
		case "invisibleWall":
			value = 5;
            previusButton = selectedButton;
			break;
		case "zoomOutBlock":
			value = 6;
            previusButton = selectedButton;
			break;
		case "zoomInBlock":
			value = 7;
            previusButton = selectedButton;
			break;
		case "jumpScare":
			value = 8;
            previusButton = selectedButton;
			break;
	}    console.log(map);

	map[y][x] = value;
	this.classList.remove(this.classList[0]);
	this.classList.add("value" + value);
    // Change the selected tile's color
    this.style.backgroundColor = selectedColor;
}

// Set the selected button
var selectedButton;
var selectedColor;
var buttons = document.getElementsByTagName("button");
for (var i = 0; i < buttons.length; i++) {
	buttons[i].addEventListener("click", function() {
		selectedButton = this.id;
        // Set the selected color based on the selected button
        switch (selectedButton) {
            case "empty":
                selectedColor = "white";
                break;
            case "wall":
                selectedColor = "gray";
                break;
            case "finish":
                selectedColor = "green";
                break;
            case "diamond":
                selectedColor = "blue";
                break;
            case "fakeWall":
                selectedColor = "orange";
                break;
            case "invisibleWall":
                selectedColor = "lightgray";
                break;
            case "zoomOutBlock":
                selectedColor = "yellow";
                break;
            case "zoomInBlock":
                selectedColor = "purple";
                break;
            case "jumpScare":
                selectedColor = "red";
                break;
        }
        // Update the button styles
        for (var j = 0; j < buttons.length; j++) {
            buttons[j].style.backgroundColor = "white";
            buttons[j].style.color = "black";
        }
        this.style.backgroundColor = selectedColor;
        this.style.color = "white";
        
	});
}

function exportMap() {
    selectedButton = previusButton;

exportArray = [];
for (var i = 0; i < height; i++) {
    var rowArray = [];
    for (var j = 0; j < width; j++) {
        if (map[i][j] === 0) {
            rowArray.push(0);
        } else {
            rowArray.push(map[i][j]);
        }
    }
    exportArray.push(rowArray);
}
console.log(JSON.stringify(exportArray).replace(/\],/g, "],\n"));
alert("Map exported to console.");
exportArray = [];
}
















    </script> 


</html>
